var __reflect=this&&this.__reflect||function(t,i,e){t.__class__=i,e?e.push(i):e=[i],t.__types__=t.__types__?e.concat(t.__types__):e},__extends=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);e.prototype=i.prototype,t.prototype=new e},__awaiter=this&&this.__awaiter||function(t,i,e,s){return new(e||(e=Promise))(function(o,n){function h(t){try{a(s.next(t))}catch(i){n(i)}}function r(t){try{a(s["throw"](t))}catch(i){n(i)}}function a(t){t.done?o(t.value):new e(function(i){i(t.value)}).then(h,r)}a((s=s.apply(t,i||[])).next())})},__generator=this&&this.__generator||function(t,i){function e(t){return function(i){return s([t,i])}}function s(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(h=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(h=h.call(n,e[1])).done)return h;switch(n=0,h&&(e=[0,h.value]),e[0]){case 0:case 1:h=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,n=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(h=a.trys,!(h=h.length>0&&h[h.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!h||e[1]>h[0]&&e[1]<h[3])){a.label=e[1];break}if(6===e[0]&&a.label<h[1]){a.label=h[1],h=e;break}if(h&&a.label<h[2]){a.label=h[2],a.ops.push(e);break}h[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(t,a)}catch(s){e=[6,s],n=0}finally{o=h=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,n,h,r,a={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return r={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},Entity=function(t){function i(i,e,s,o){var n=t.call(this)||this;return n.position=0,n.speed=0,n.life=0,n.attack=0,n.isDie=!1,n.isOver=!1,n.id=null,n.color=0,n.isFriendly=!0,n.lifeTime=0,n.maxLifeTime=-1,n.timePathDatas=null,n.lastTime=0,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.id=i,n.x=e,n.y=s,n.gc=o,n}return __extends(i,t),i.prototype.onAddToStage=function(t){this.lastTime=egret.getTimer(),this.draw(),this.initChild(),this.lifeTime=0},i.prototype.draw=function(){},i.prototype.initChild=function(){},i.prototype.move=function(t){var i=this.speed*t/1e3*Math.cos(this.position),e=this.speed*t/1e3*Math.sin(this.position);this.x=this.x+i,this.y=this.y+e},i.prototype.go=function(t){this.lifeControl(t),this.isDie||(this.moveRun(t),this.attackRun(t),this.childGo(t),this.skillShot(t))},i.prototype.childGo=function(t){},i.prototype.getGloHitRects=function(){var t=new Array,i=this.getSelfGloHitRect();return t.push(i),t},i.prototype.getSelfGloHitRect=function(){var t=this.getBounds(),i=new egret.Point;return this.localToGlobal(0+this.anchorOffsetX,0+this.anchorOffsetY,i),t.x=i.x+t.left,t.y=i.y+t.top,t},i.prototype.lifeControl=function(t){return this.maxLifeTime>=0&&this.lifeTime>=this.maxLifeTime?void this.die():void(this.lifeTime=this.lifeTime+t)},i.prototype.moveRun=function(t){if(null!=this.timePathDatas)for(var i=0;i<this.timePathDatas.length;i++){if(!(i<this.timePathDatas.length-1)){this.maxLifeTime<0&&(this.lifeTime=0),i>0&&(this.timePathDatas[i-1].isCurrentTime=!1);break}if(this.lifeTime>=this.timePathDatas[i].time&&this.lifeTime<this.timePathDatas[i+1].time){this.timePathDatas[i].isCurrentTime||(this.position=this.timePathDatas[i].position,this.timePathDatas[i].isCurrentTime=!0,i>0&&(this.timePathDatas[i-1].isCurrentTime=!1));break}}this.move(t)},i.prototype.attackRun=function(t){},i.prototype.shot=function(t){},i.prototype.die=function(){this.isDie||(this.isDie=!0,this.dieAnimation())},i.prototype.dieAnimation=function(){this.isOver=!0},i.prototype.collisionHandle=function(t){this.behit(t)},i.prototype.behit=function(t){var i=t.getHurt();this.life=this.life-i,this.life<=0&&this.die()},i.prototype.skillShot=function(t){},i.prototype.behitOfOrigin=function(t){this.die()},i.prototype.getHurt=function(){return this.attack},i.prototype.getPosition=function(){return this.position},i.prototype.setPosition=function(t){this.position=t},i.prototype.getspeed=function(){return this.speed},i.prototype.setspeed=function(t){this.speed=t},i.prototype.getIsFriendly=function(){return this.isFriendly},i.prototype.getIsDie=function(){return this.isDie},i.prototype.getIsOver=function(){return this.isOver},i}(egret.Sprite);__reflect(Entity.prototype,"Entity");var aaa=function(){function t(t){this.j=0,this.po=new egret.Point,this.i=t}return t.prototype.getI=function(){return this.i},t}();__reflect(aaa.prototype,"aaa");var Bullet=function(t){function i(i,e,s,o,n,h,r){var a=t.call(this,e,h,r)||this;return a.producer=s,a.type=i,a.setPosition(o),a.isFriendly=n,a.isFriendly?a.color=65280:a.color=16711680,a.setspeed(200),a.life=1,a.attack=1,a.maxLifeTime=1e4,a}return __extends(i,t),i.prototype.collisionHandle=function(t){this.collisionAnimation(),this.die()},i.prototype.collisionAnimation=function(){this.isCollisionAnimation=!0;var t=new egret.Shape;t.graphics.beginFill(16777215,1),t.graphics.moveTo(-10,-4),t.graphics.lineTo(10,-4),t.graphics.lineTo(20,0),t.graphics.lineTo(10,4),t.graphics.lineTo(-10,4),t.graphics.lineTo(-10,-4),t.graphics.endFill(),t.y=-this.height/2,t.rotation=-45,this.addChild(t);var i=egret.Tween.get(t);i.to({alpha:0},200),i.call(this.onComplete,this)},i.prototype.onComplete=function(){this.isCollisionAnimation=!1,this.isOver=!0},i.prototype.dieAnimation=function(){this.isCollisionAnimation||(this.isOver=!0)},i.prototype.draw=function(){var t=new egret.Sprite;t.graphics.beginFill(this.color,1),t.graphics.drawCircle(0,0,5),t.graphics.endFill(),this.addChild(t)},i.prototype.initChild=function(){},i.TYPE_NOR=1,i.TYPE_CIRCLE=2,i.TYPE_SQUARE=3,i.TYPE_TRIANGLE=4,i}(Entity);__reflect(Bullet.prototype,"Bullet");var Gaometry=function(t){function i(i,e,s,o,n,h,r,a,l,c){var p=t.call(this,e,n,h,c)||this;return p.radian=0,p.revSpeed=5e3,p.type=i,p.setPosition(s),p.isFriendly=o,p.state=r,p.setspeed(a),p.timePathDatas=l,p.isFriendly?p.color=65280:p.color=16711680,p.life=1,p.attack=1,p.maxLifeTime=3e4,p.attackSpeed=.5,p.attackTime=0,p}return __extends(i,t),i.prototype.draw=function(){},i.prototype.initChild=function(){},i.prototype.moveRun=function(e){this.state==i.STATE_FREE?t.prototype.moveRun.call(this,e):this.state==i.STATE_FATTER?this.revolution(e):this.state==i.STATE_FOLLOW&&this.followMove()},i.prototype.lifeControl=function(e){this.state==i.STATE_FATTER?this.lifeTime=this.lifeTime+e:t.prototype.lifeControl.call(this,e)},i.prototype.attackRun=function(t){this.attackTime>=1e3/this.attackSpeed?(this.shot(),this.attackTime=0):this.attackTime=this.attackTime+t},i.prototype.shot=function(){},i.prototype.collisionHandle=function(t){var i=t.constructor.name;"Origin"==i?this.behitOfOrigin(t):"Bullet"==i||"CirBullet"==i||"SquBullet"==i||"TriBullet"==i||"CirSuperBullet"==i?this.behit(t):("Gaometry"==i||"Circle"==i||"Diamond"==i||"Square"==i||"Triangle"==i)&&this.behit(t)},i.prototype.behit=function(t){if(this.state==i.STATE_FREE||this.state==i.STATE_FOLLOW){var e=t.getHurt();this.life=this.life-e,this.life<=0&&this.die()}else this.state==i.STATE_FATTER&&this.revolutionOrigin.behit(t)},i.prototype.behitOfOrigin=function(t){this.state==i.STATE_FREE?this.die():this.state==i.STATE_FATTER&&this.revolutionOrigin.behitOfOrigin(t)},i.prototype.revolution=function(t){var i=1;this.revolutionOrigin.getMultipleBuff()&&(i=this.revolutionOrigin.getMultiple()),this.radian=this.radian+2*t*Math.PI/this.revSpeed*i,this.radian>=2*Math.PI&&(this.radian=this.radian-2*Math.PI),this.x=this.revolutionRadius*Math.cos(this.radian),this.y=this.revolutionRadius*Math.sin(this.radian)},i.prototype.setRevolutionData=function(t,i,e){this.radian=t,this.revolutionRadius=i,this.revolutionOrigin=e},i.prototype.followMove=function(){this.x=this.followOrigin.x+this.followX,this.y=this.followOrigin.y+this.followY},i.prototype.setFollowData=function(t,i,e){this.followX=t,this.followY=i,this.followOrigin=e},i.prototype.dieAnimation=function(){this.timer=new egret.Timer(1e3/30,10),this.timer.addEventListener(egret.TimerEvent.TIMER,this.dieAnimationRun,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.dieAnimationComplete,this),this.timer.start()},i.prototype.dieAnimationRun=function(t){this.dieAnimationPaintin(this.timer.currentCount/this.timer.repeatCount)},i.prototype.dieAnimationPaintin=function(t){},i.prototype.dieAnimationComplete=function(t){egret.log("circle animationComplete"),this.isOver=!0},i.prototype.getType=function(){return this.type},i.prototype.getRadian=function(){return this.radian},i.prototype.getRevolutionRadius=function(){return this.revolutionRadius},i.TYPE_DIAMOND=4,i.TYPE_CIRCLE=1,i.TYPE_SQUARE=2,i.TYPE_TRIANGLE=3,i.STATE_FREE=1,i.STATE_FATTER=2,i.STATE_FOLLOW=3,i}(Entity);__reflect(Gaometry.prototype,"Gaometry");var Origin=function(t){function i(i,e,s,o,n,h,r,a){var l=t.call(this,i,o,n,a)||this;return l.attackApeed=.5,l.attackTime=2e3,l.gts=new Array,l.multiple=1,l.multipleBuff=!1,l.multipleBuffTimeSurplus=0,l.setPosition(e),l.isFriendly=s,l.setspeed(h),l.timePathDatas=r,l.delSpeed=100,l.isFriendly?l.color=65280:l.color=16711680,l.initData(),l}return __extends(i,t),i.prototype.initData=function(){this.life=1,this.attack=1,this.maxLifeTime=-1},i.prototype.initChild=function(){for(var t=0;3>t;t++){var i=new Circle(IdUitl.getId(),0,this.isFriendly,0,0,Gaometry.STATE_FATTER,0,null,this.gc);i.setRevolutionData(t*Math.PI/3*2,this.og.width/2,this),this.gts[t]=i,this.addChild(i)}this.activationCirSkill()},i.prototype.draw=function(){this.og=new egret.Shape,this.og.graphics.beginFill(255,.8),this.og.graphics.drawCircle(0,0,8),this.og.graphics.endFill(),this.og.graphics.lineStyle(5,65280),this.og.graphics.drawCircle(0,0,40),this.og.graphics.endFill(),this.addChild(this.og)},i.prototype.go=function(i){t.prototype.go.call(this,i),this.buffLifeRun(i)},i.prototype.buffLifeRun=function(t){this.multipleBuff&&(this.multipleBuffTimeSurplus=this.multipleBuffTimeSurplus-t,this.multipleBuffTimeSurplus<=0&&this.restoreRevo())},i.prototype.move=function(i){t.prototype.move.call(this,i),this.x=this.x+GameView.speed*i/1e3},i.prototype.shot=function(){var t=new egret.Point;this.localToGlobal(0,0,t);var i=new Bullet(Bullet.TYPE_NOR,"dddd",this,0,!0,t.x,t.y);null!=this.gc&&this.gc.addEntityToGame(i)},i.prototype.attackRun=function(t){this.attackTime=this.attackTime+t,this.attackTime>=1e3/this.attackApeed&&(this.shot(),this.attackTime=0)},i.prototype.childGo=function(t){for(var i=0;i<this.gts.length;i++)this.gts[i].go(t)},i.prototype.die=function(){this.isDie=!0},i.prototype.collisionHandle=function(t){if(!this.gtsCollisionHandle(t)){var i=t.constructor.name;"Origin"==i?this.behitOfOrigin(t):"Bullet"==i||"CirBullet"==i||"SquBullet"==i||"TriBullet"==i||"CirSuperBullet"==i?this.behit(t):("Gaometry"==i||"Circle"==i||"Diamond"==i||"Square"==i||"Triangle"==i)&&this.behit(t)}},i.prototype.gtsCollisionHandle=function(t){for(var i=0;i<this.gts.length;i++)if(GameControl.hitEntityTest(this.gts[i],t))return this.gts[i].collisionHandle(t),!0;return!1},i.prototype.getGloHitRects=function(){for(var t=new Array,i=0;i<this.gts.length;i++){var e=this.gts[i].getGloHitRects();t=t.concat(e)}var s=this.getSelfGloHitRect();return t.push(s),t},i.prototype.getSelfGloHitRect=function(){var t=this.og.getBounds(),i=new egret.Point;return this.og.localToGlobal(0+this.anchorOffsetX,0+this.anchorOffsetY,i),t.x=i.x+t.left,t.y=i.y+t.top,t},i.prototype.setSpeedForDel=function(){this.setspeed(this.delSpeed)},i.prototype.changeGao=function(t){if(null!=this.gts[t]){var i=this.gts[t].getType()+1;if(i==Gaometry.TYPE_CIRCLE){var e=new Circle(IdUitl.getId(),this.gts[t].getPosition(),this.isFriendly,this.gts[t].x,this.gts[t].y,Gaometry.STATE_FATTER,0,null,this.gc);e.setRevolutionData(this.gts[t].getRadian(),this.gts[t].getRevolutionRadius(),this),this.removeChild(this.gts[t]),this.gts[t]=e,this.addChild(e)}else if(i==Gaometry.TYPE_DIAMOND){var e=new Diamond(IdUitl.getId(),this.gts[t].getPosition(),this.isFriendly,this.gts[t].x,this.gts[t].y,Gaometry.STATE_FATTER,0,null,this.gc);e.setRevolutionData(this.gts[t].getRadian(),this.gts[t].getRevolutionRadius(),this),this.removeChild(this.gts[t]),this.gts[t]=e,this.addChild(e)}else if(i==Gaometry.TYPE_SQUARE){var e=new Square(IdUitl.getId(),this.gts[t].getPosition(),this.isFriendly,this.gts[t].x,this.gts[t].y,Gaometry.STATE_FATTER,0,null,this.gc);e.setRevolutionData(this.gts[t].getRadian(),this.gts[t].getRevolutionRadius(),this),this.removeChild(this.gts[t]),this.gts[t]=e,this.addChild(e)}else if(i==Gaometry.TYPE_TRIANGLE){var e=new Triangle(IdUitl.getId(),this.gts[t].getPosition(),this.isFriendly,this.gts[t].x,this.gts[t].y,Gaometry.STATE_FATTER,0,null,this.gc);e.setRevolutionData(this.gts[t].getRadian(),this.gts[t].getRevolutionRadius(),this),this.removeChild(this.gts[t]),this.gts[t]=e,this.addChild(e)}else{var e=new Circle(IdUitl.getId(),this.gts[t].getPosition(),this.isFriendly,this.gts[t].x,this.gts[t].y,Gaometry.STATE_FATTER,0,null,this.gc);e.setRevolutionData(this.gts[t].getRadian(),this.gts[t].getRevolutionRadius(),this),this.removeChild(this.gts[t]),this.gts[t]=e,this.addChild(e)}}},i.prototype.skillShot=function(t){this.skill.skillShot(t)},i.prototype.activationSkill=function(){this.gts[0].getType()==Gaometry.TYPE_CIRCLE&&this.gts[1].getType()==Gaometry.TYPE_CIRCLE&&this.gts[2].getType()==Gaometry.TYPE_CIRCLE?this.skill.getType()!=Skill.TYPE_CIR&&this.activationCirSkill():this.gts[0].getType()==Gaometry.TYPE_DIAMOND&&this.gts[1].getType()==Gaometry.TYPE_DIAMOND&&this.gts[2].getType()==Gaometry.TYPE_DIAMOND?this.skill.getType()!=Skill.TYPE_DIA&&this.activationDiaSkill():this.gts[0].getType()==Gaometry.TYPE_SQUARE&&this.gts[1].getType()==Gaometry.TYPE_SQUARE&&this.gts[2].getType()==Gaometry.TYPE_SQUARE?this.skill.getType()!=Skill.TYPE_SQU&&this.activationSquSkill():this.gts[0].getType()==Gaometry.TYPE_TRIANGLE&&this.gts[1].getType()==Gaometry.TYPE_TRIANGLE&&this.gts[2].getType()==Gaometry.TYPE_TRIANGLE&&this.skill.getType()!=Skill.TYPE_TRI&&this.activationTriSkill()},i.prototype.activationCirSkill=function(){this.skill=new SkillCir(this,this.gc)},i.prototype.activationDiaSkill=function(){this.skill=new SkillDia(this,this.gc)},i.prototype.activationSquSkill=function(){this.skill=new SkillSqu(this,this.gc)},i.prototype.activationTriSkill=function(){this.skill=new SkillTri(this,this.gc)},i.prototype.accelerateRevo=function(t){this.multiple=t,this.multipleBuff=!0,this.multipleBuffTimeSurplus=5e3},i.prototype.restoreRevo=function(){this.multiple=1,this.multipleBuff=!1},i.prototype.getMultiple=function(){return this.multiple},i.prototype.getMultipleBuff=function(){return this.multipleBuff},i.prototype.getOgRadius=function(){return this.og.width/2},i.prototype.getGts=function(){return this.gts},i}(Entity);__reflect(Origin.prototype,"Origin");var IdUitl=function(){function t(){}return t.getId=function(){return t.curId++,t.curId.toString()},t.curId=1e4,t}();__reflect(IdUitl.prototype,"IdUitl");var LoadingUI=function(t){function i(){var i=t.call(this)||this;return i.createView(),i}return __extends(i,t),i.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.prototype.onProgress=function(t,i){this.textField.text="Loading..."+t+"/"+i},i}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var bbb=function(t){function i(i){var e=t.call(this,i)||this;return e.iii=i,e}return __extends(i,t),i}(aaa);__reflect(bbb.prototype,"bbb");var TimePathData=function(){function t(){this.isCurrentTime=!1}return t}();__reflect(TimePathData.prototype,"TimePathData");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var CirBullet=function(t){function i(i,e,s,o,n,h){var r=t.call(this,Bullet.TYPE_CIRCLE,i,e,s,o,n,h)||this;return r.initData(),r}return __extends(i,t),i.prototype.initData=function(){this.setspeed(200),this.life=1,this.attack=1,this.maxLifeTime=1e4},i.prototype.draw=function(){var t=new egret.Sprite;t.graphics.lineStyle(2,this.color),t.graphics.drawCircle(0,0,5),t.graphics.endFill(),this.addChild(t)},i.prototype.initChild=function(){},i}(Bullet);__reflect(CirBullet.prototype,"CirBullet");var Circle=function(t){function i(i,e,s,o,n,h,r,a,l){var c=t.call(this,Gaometry.TYPE_CIRCLE,i,e,s,o,n,h,r,a,l)||this;return c.life=1,c.attack=1,c.attackSpeed=.2,c.attackTime=0,c}return __extends(i,t),i.prototype.draw=function(){this.width=40,this.height=40,this.graphics.lineStyle(2,this.color),this.graphics.drawCircle(0,0,this.width/2),this.graphics.endFill()},i.prototype.shot=function(){var t=new egret.Point;this.localToGlobal(0,0,t);var i=new CirBullet("dddd",this,this.getPosition(),this.isFriendly,t.x,t.y);i.getIsFriendly()?i.setPosition(0):i.setPosition(Math.PI),null!=this.gc&&this.gc.addEntityToGame(i)},i.prototype.dieAnimationPaintin=function(t){if(null==this.lineAnimations){this.graphics.clear(),this.lineAnimations=new Array;for(var i=0;8>i;i++){var e=new egret.Shape;e.graphics.lineStyle(2,this.color),e.graphics.drawArc(0,0,this.width/2,i*Math.PI/4,(i+1)*Math.PI/4),e.graphics.endFill(),e.x=Math.cos((i+1)*Math.PI/4)*this.width/2,e.y=Math.sin((i+1)*Math.PI/4)*this.width/2,e.anchorOffsetX=e.x,e.anchorOffsetY=e.y,this.lineAnimations.push(e),this.addChild(e)}}for(var i=0;i<this.lineAnimations.length;i++){this.lineAnimations[i].rotation=90*t;var s=Math.acos(this.lineAnimations[i].x/Math.sqrt(Math.pow(this.lineAnimations[i].x,2)+Math.pow(this.lineAnimations[i].y,2)));this.lineAnimations[i].y<0&&(s=2*Math.PI-s),this.lineAnimations[i].x=Math.cos(s)*(this.width/2*(1-t)),this.lineAnimations[i].y=Math.sin(s)*(this.width/2*(1-t)),this.lineAnimations[i].alpha=1-t}},i}(Gaometry);__reflect(Circle.prototype,"Circle");var CirSuperBullet=function(t){function i(i,e,s,o,n,h){var r=t.call(this,Bullet.TYPE_CIRCLE,i,e,s,o,n,h)||this;return r.oneTrue=!0,r.setspeed(0),r.life=1,r.attack=1,r.maxLifeTime=1e4,r}return __extends(i,t),i.prototype.draw=function(){var t=this.createBitmapByName("cirsuperb_png");this.addChild(t),this.anchorOffsetY=this.height/2},i.prototype.createBitmapByName=function(t){var i=new egret.Bitmap,e=RES.getRes(t);return i.texture=e,i},i.prototype.lifeControl=function(t){return this.oneTrue?void(this.oneTrue=!1):(this.die(),void(this.isOver=!0))},i.prototype.collisionHandle=function(t){},i}(Bullet);__reflect(CirSuperBullet.prototype,"CirSuperBullet");var Diamond=function(t){function i(i,e,s,o,n,h,r,a,l){var c=t.call(this,Gaometry.TYPE_DIAMOND,i,e,s,o,n,h,r,a,l)||this;return c.life=1,c.attack=1,c.maxLifeTime=15e3,c}return __extends(i,t),i.prototype.draw=function(){this.width=40,this.height=40,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.graphics.lineStyle(3,this.color),this.graphics.drawRect(0,0,this.width,this.height),this.graphics.endFill()},i.prototype.shot=function(){},i.prototype.collisionHandle=function(t){var i=t.constructor.name;"Origin"==i?this.behitOfOrigin(t):"Bullet"==i||"CirBullet"==i||"SquBullet"==i||"TriBullet"==i||"Diamond"==i&&this.behit(t)},i.prototype.dieAnimationPaintin=function(t){this.alpha=t},i}(Gaometry);__reflect(Diamond.prototype,"Diamond");var CirlerData=function(){function t(t,i,e){this.x=t,this.y=i,this.r=e}return t.prototype.intersects=function(t){var i=this.x-t.x,e=this.y-t.y,s=Math.sqrt(Math.pow(i,2)+Math.pow(e,2));return s<=this.r+t.r?!0:!1},t}();__reflect(CirlerData.prototype,"CirlerData");var GameControl=function(){function t(t){this.gameTime=0,this.lastGameTime=0,this.lifeTime=1e5,this.enimys=new Array,this.gameview=t}return t.prototype.initGame=function(){var t=new Map;this.addEntityToGame(t);var i=new Origin(IdUitl.getId(),0,!0,200,200,0,null,this);this.addEntityToGame(i),this.enimys=new Array,this.bullets=new Array,this.gaometrys=new Array,this.gameTime=0,this.lastGameTime=0,this.lifeTime=1e5},t.prototype.startGame=function(){},t.prototype.gameRun=function(t){this.lifeRun(t),this.updateEntity(),this.collisionDetection(),this.entityGo(t),this.overClean()},t.prototype.lifeRun=function(t){this.lastGameTime=this.gameTime,this.gameTime=this.gameTime+t,this.isGameOver()},t.prototype.entityGo=function(t){this.my.go(t);for(var i=0;i<this.enimys.length;i++)this.enimys[i].getIsDie()||this.enimys[i].go(t);for(var i=0;i<this.gaometrys.length;i++)this.gaometrys[i].getIsDie()||this.gaometrys[i].go(t);for(var i=0;i<this.bullets.length;i++)this.bullets[i].getIsDie()||this.bullets[i].go(t)},t.prototype.gameOver=function(){},t.prototype.updateEntity=function(){if(this.lastGameTime<=0&&this.gameTime>=0){var t=new Circle(IdUitl.getId(),Math.PI,!1,1e3,200,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(t);var i=new Circle(IdUitl.getId(),Math.PI,!1,1e3,400,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(i);var e=new Circle(IdUitl.getId(),Math.PI,!1,1e3,600,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(e)}else if(this.lastGameTime<=4e3&&this.gameTime>=4e3){var t=new Diamond(IdUitl.getId(),Math.PI/2,!1,1200,-50,Gaometry.STATE_FREE,50,null,this);this.addEntityToGame(t);var i=new Diamond(IdUitl.getId(),3*Math.PI/2,!1,1200,700,Gaometry.STATE_FREE,50,null,this);this.addEntityToGame(i)}else if(this.lastGameTime<=8e3&&this.gameTime>=8e3){var t=new Circle(IdUitl.getId(),Math.PI,!1,1300,300,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(t);var i=new Circle(IdUitl.getId(),Math.PI,!1,1300,600,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(i)}else if(this.lastGameTime<=12e3&&this.gameTime>=12e3){var s=new Square(IdUitl.getId(),Math.PI,!1,1400,300,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(s);var o=new Square(IdUitl.getId(),Math.PI,!1,1400,600,Gaometry.STATE_FREE,0,null,this);this.addEntityToGame(o)}},t.prototype.collisionDetection=function(){for(var i=0;i<this.bullets.length;i++)this.bullets[i].getIsFriendly()||this.bullets[i].getIsDie()||t.hitEntityTest(this.my,this.bullets[i])&&(this.my.collisionHandle(this.bullets[i]),this.bullets[i].collisionHandle(this.my));for(var i=0;i<this.gaometrys.length;i++)this.gaometrys[i].getIsFriendly()||this.gaometrys[i].getIsDie()||t.hitEntityTest(this.my,this.gaometrys[i])&&(this.my.collisionHandle(this.gaometrys[i]),this.gaometrys[i].collisionHandle(this.my));for(var i=0;i<this.bullets.length;i++)for(var e=0;e<this.gaometrys.length;e++)this.bullets[i].getIsFriendly()==this.gaometrys[e].getIsFriendly()||this.gaometrys[e].getIsDie()||this.bullets[i].getIsDie()||t.hitEntityTest(this.bullets[i],this.gaometrys[e])&&(this.bullets[i].collisionHandle(this.gaometrys[e]),this.gaometrys[e].collisionHandle(this.bullets[i]));for(var i=0;i<this.gaometrys.length;i++)if(this.gaometrys[i].getIsFriendly())for(var e=0;e<this.gaometrys.length;e++)this.gaometrys[e].getIsFriendly()||t.hitEntityTest(this.gaometrys[i],this.gaometrys[e])&&(this.gaometrys[i].collisionHandle(this.gaometrys[e]),this.gaometrys[e].collisionHandle(this.gaometrys[i]))},t.hitEntityTest=function(t,i){for(var e=t.getGloHitRects(),s=i.getGloHitRects(),o=0;o<e.length;o++)for(var n=0;n<s.length;n++)if(e[o].intersects(s[n]))return!0;return!1},t.prototype.hitTest=function(t,i){var e=t.getBounds(),s=i.getBounds();return e.x=t.x+e.left,e.y=t.y+e.top,s.x=i.x+s.left,s.y=i.y+s.top,e.intersects(s)},t.prototype.hitTestForCirler=function(t,i){var e=new CirlerData(t.x,t.y,t.width/2),s=new CirlerData(i.x,i.y,i.width/2);return e.intersects(s)},t.prototype.isGameOver=function(){this.my.getIsDie()?this.gameOver():this.gameTime>this.lifeTime&&this.gameOver()},t.prototype.overClean=function(){this.removeOverEntitys(this.bullets),this.removeOverEntitys(this.gaometrys)},t.prototype.removeOverEntitys=function(t){for(var i=new Array,e=0;e<t.length;e++)t[e].getIsOver()&&i.push(t[e]);for(var e=0;e<i.length;e++)i[e].getIsOver()&&this.reMoveEntityForGame(i[e])},t.prototype.addEntityToGame=function(t){var i=t.constructor.name;if("Origin"==i)t.getIsFriendly?(this.my=t,this.gameview.addChild(this.my)):(this.enimys.push(t),this.gameview.addChild(t));else if("Bullet"==i||"CirBullet"==i||"SquBullet"==i||"TriBullet"==i||"CirSuperBullet"==i){this.bullets.push(t);var e=new egret.Point;this.gameview.globalToLocal(t.x,t.y,e),t.x=e.x,t.y=e.y,this.gameview.addChild(t)}else"Gaometry"==i||"Circle"==i||"Diamond"==i||"Square"==i||"Triangle"==i?(this.gaometrys.push(t),this.gameview.addChild(t)):"Map"==i&&(this.map=t,this.gameview.addChild(t))},t.prototype.reMoveEntityForGame=function(t){var i=t.constructor.name;if("Origin"==i)if(t.getIsFriendly())this.my=null,this.gameview.removeChild(this.my);else{var e=this.enimys.indexOf(t);e>-1&&this.enimys.splice(e,1),this.gameview.removeChild(t)}else if("Bullet"==i||"CirBullet"==i||"SquBullet"==i||"TriBullet"==i||"CirSuperBullet"==i){var e=this.bullets.indexOf(t);e>-1&&this.bullets.splice(e,1),this.gameview.removeChild(t)}else if("Gaometry"==i||"Circle"==i||"Diamond"==i||"Square"==i||"Triangle"==i){var e=this.gaometrys.indexOf(t);e>-1&&this.gaometrys.splice(e,1),this.gameview.removeChild(t)}else"Map"==i&&(this.map=null,this.gameview.removeChild(t))},t.prototype.rouMove=function(t){this.my.setPosition(t),this.my.setSpeedForDel()},t.prototype.rouUp=function(){this.my.setspeed(0)},t.prototype.getTrackObj=function(t){var i=this.getHostiles(t);return this.getCurTrack(t,i,0,100)},t.prototype.getHostiles=function(t){var i=new Array;t.getIsFriendly()!=this.my.getIsFriendly()&&i.push(this.my);for(var e=0;e<this.enimys.length;e++)this.enimys[e].getIsFriendly()!=t.getIsFriendly()&&i.push(this.enimys[e]);for(var e=0;e<this.gaometrys.length;e++)this.gaometrys[e].getIsFriendly()!=t.getIsFriendly()&&i.push(this.gaometrys[e]);return i},t.prototype.getCurTrack=function(t,i,e,s){var o=this,n=function(t,i,e,s){var n=o.getGainHostiles(t,i,e,s);if(1==n.length)return n[0];if(n.length>1){var h=Math.floor(Math.random()*n.length);return n[h]}return null},h=n(t,i,e,s);if(null==h){var r=e+s,a=300;return r>=1200?null:this.getCurTrack(t,i,r,a)}return h},t.prototype.getGainHostiles=function(t,i,e,s){for(var o=new Array,n=0;n<i.length;n++){var h=Math.sqrt(Math.pow(i[n].x-t.x,2)+Math.pow(i[n].y-t.y,2));h>=e&&s+e>h&&o.push(i[n])}return o},t.prototype.changeOriginGao=function(t){this.my.changeGao(t)},t.prototype.skillActivation=function(){this.my.activationSkill()},t}();__reflect(GameControl.prototype,"GameControl");var Map=function(t){function i(){var i=t.call(this)||this;return i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){this.width=this.stage.width,this.height=this.stage.height,this.draw()},i.prototype.draw=function(){this.graphics.beginFill(2236962,1),this.graphics.drawRect(0,0,10*this.width,this.height),this.graphics.endFill();var t=new egret.Sprite;t.graphics.lineStyle(2,16777215);for(var i=0;i*this.width<=10*this.width;i++)t.graphics.moveTo(i*this.width/2,0),t.graphics.lineTo(i*this.width/2,this.height);t.graphics.endFill(),this.addChild(t)},i}(egret.Sprite);__reflect(Map.prototype,"Map");var Main=function(t){function i(){var i=t.call(this)||this;return i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){var i=this;egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause(),i.gs.onPause(),egret.log("onPause")},egret.lifecycle.onResume=function(){egret.ticker.resume(),i.gs.onResume(),egret.log("onResume")},this.runGame()["catch"](function(t){console.log(t)})},i.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=e.sent(),[4,platform.login()];case 3:return e.sent(),[4,platform.getUserInfo()];case 4:return i=e.sent(),console.log(i),[2]}})})},i.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return e.sent(),this.stage.removeChild(t),[3,4];case 3:return i=e.sent(),console.error(i),[3,4];case 4:return[2]}})})},i.prototype.createGameScene=function(){var t=this.createBitmapByName("bg_jpg");this.addChild(t);var i=this.stage.stageWidth,e=this.stage.stageHeight;t.width=i,t.height=e,this.gs=new GameScene,this.addChild(this.gs)},i.prototype.createBitmapByName=function(t){var i=new egret.Bitmap,e=RES.getRes(t);return i.texture=e,i},i.prototype.startAnimation=function(t){var i=this,e=new egret.HtmlTextParser,s=t.map(function(t){return e.parse(t)}),o=this.textfield,n=-1,h=function(){n++,n>=s.length&&(n=0);var t=s[n];o.textFlow=t;var e=egret.Tween.get(o);e.to({alpha:1},200),e.wait(2e3),e.to({alpha:0},200),e.call(h,i)};h()},i}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var ResourcesGao=function(t){function i(i,e,s,o){var n=t.call(this,e,s,o)||this;return n.type=i,n}return __extends(i,t),i.prototype.draw=function(){this.type==i.RESGAO_CIRCLE?(this.graphics.lineStyle(3,this.color),this.graphics.drawCircle(0,0,20),this.graphics.endFill()):this.type==i.RESGAO_DIAMOND?(this.width=20,this.height=20,this.anchorOffsetX=-this.width/2,this.anchorOffsetY=-this.height/2,this.graphics.lineStyle(3,this.color),this.graphics.drawRect(0,0,this.width,this.height),this.graphics.endFill()):this.type==i.RESGAO_SQUARE?(this.width=20,this.height=20,this.graphics.lineStyle(3,this.color),this.graphics.moveTo(this.width/2,0),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,0),this.graphics.lineTo(0,this.height/2),this.graphics.lineTo(this.width/2,0),this.graphics.endFill()):this.type==i.RESGAO_TRIANGLE&&(this.width=20,this.height=20,this.graphics.lineStyle(3,this.color),this.graphics.moveTo(this.width/2,this.height/2),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,this.height/2),this.graphics.lineTo(this.width/2,this.height/2),this.graphics.endFill())},i.prototype.go=function(t){},i.prototype.move=function(){},i.prototype.collisionHandle=function(){this.die()},i.RESGAO_CIRCLE=1,i.RESGAO_DIAMOND=2,i.RESGAO_SQUARE=3,i.RESGAO_TRIANGLE=4,i}(Entity);__reflect(ResourcesGao.prototype,"ResourcesGao");var Skill=function(){function t(t,i){this.og=t}return t.prototype.skillShot=function(t){this.skillTime>=1e3/this.skillSpeed?(this._skillShot(t),this.skillTime=0):this.skillTime=this.skillTime+t},t.prototype._skillShot=function(t){},t.prototype.getType=function(){return this.type},t.TYPE_CIR=1,t.TYPE_DIA=2,t.TYPE_SQU=3,t.TYPE_TRI=4,t}();__reflect(Skill.prototype,"Skill");var SkillCir=function(t){function i(i,e){var s=t.call(this,i)||this;return s.continuedTime=0,s.totalTime=5e3,s.skillShoting=!1,s.skillShape=new egret.Shape,s.skillRadian=0,s.skillTime=0,s.skillSpeed=.1,s.type=Skill.TYPE_CIR,s.gc=e,s}return __extends(i,t),i.prototype.skillShot=function(t){if(this.skillShoting&&this.continuedTime<=this.totalTime)this.continuedTime=this.continuedTime+t,this._skillShot(t);else{this.skillShoting=!1;var i=this.og.getChildIndex(this.skillShape);i>=0&&this.og.removeChild(this.skillShape),this.skillTime>=1e3/this.skillSpeed?(this.og.addChildAt(this.skillShape,0),this._skillShot(t),this.skillTime=0,this.continuedTime=0,this.skillShoting=!0):this.skillTime=this.skillTime+t}},i.prototype._skillShot=function(t){var i=Math.cos(this.skillRadian)*this.og.getOgRadius()*3/8,e=Math.sin(this.skillRadian)*this.og.getOgRadius()*3/8;
this.drawSkill(t,i,e);var s=0;s=this.og.getIsFriendly()?0:Math.PI/2;var o=new egret.Point;this.og.localToGlobal(i,e,o),this.shot(o.x,o.y)},i.prototype.shot=function(t,i){var e=0;e=this.og.getIsFriendly()?0:Math.PI/2;var s=new CirSuperBullet(IdUitl.getId(),this.og,e,!0,t,i);null!=this.gc&&this.gc.addEntityToGame(s)},i.prototype.drawSkill=function(t,i,e){this.skillShape.graphics.clear();var s=this.og.getGts();this.skillShape.graphics.lineStyle(8,14540253);for(var o=0;o<s.length;o++)this.skillShape.graphics.moveTo(i,e),this.skillShape.graphics.lineTo(s[o].x,s[o].y);this.skillShape.graphics.beginFill(16777215),this.skillShape.graphics.drawCircle(i,e,8),this.skillShape.graphics.endFill(),this.skillRadian=this.skillRadian+t/2e3*Math.PI*2},i}(Skill);__reflect(SkillCir.prototype,"SkillCir");var SkillDia=function(t){function i(i,e){var s=t.call(this,i)||this;return s.continuedTime=0,s.totalTime=5e3,s.skillShoting=!1,s.multiple=4,s.skillTime=0,s.skillSpeed=1,s.type=Skill.TYPE_DIA,s.gc=e,s}return __extends(i,t),i.prototype.skillShot=function(t){this.skillShoting&&this.continuedTime<=this.totalTime?this.continuedTime=this.continuedTime+t:(this.skillShoting=!1,this.skillTime>=1e3/this.skillSpeed?(this._skillShot(t),this.skillTime=0,this.continuedTime=0,this.skillShoting=!0):this.skillTime=this.skillTime+t)},i.prototype._skillShot=function(t){this.og.accelerateRevo(this.multiple)},i}(Skill);__reflect(SkillDia.prototype,"SkillDia");var SkillSqu=function(t){function i(i,e){var s=t.call(this,i)||this;return s.skillTime=19e3,s.skillSpeed=.05,s.type=Skill.TYPE_SQU,s.gc=e,s}return __extends(i,t),i.prototype._skillShot=function(t){var i=new egret.Point;i.x=0,i.y=90,this._skillShotByPosition(i),i.x=0,i.y=-90,this._skillShotByPosition(i),i.x=-50,i.y=140,this._skillShotByPosition(i),i.x=-50,i.y=-140,this._skillShotByPosition(i)},i.prototype._skillShotByPosition=function(t){var i=0;i=this.og.getIsFriendly()?0:Math.PI/2;var e=(this.og.x+t.x,this.og.y+t.y,new Square(IdUitl.getId(),i,this.og.getIsFriendly(),this.og.x+t.x,this.og.y+t.y,Gaometry.STATE_FOLLOW,0,null,this.gc));e.setFollowData(t.x,t.y,this.og),null!=this.gc&&this.gc.addEntityToGame(e)},i}(Skill);__reflect(SkillSqu.prototype,"SkillSqu");var SkillTri=function(t){function i(i,e){var s=t.call(this,i)||this;return s.skillTime=0,s.skillSpeed=.5,s.type=Skill.TYPE_TRI,s.gc=e,s}return __extends(i,t),i.prototype._skillShot=function(t){var i=new egret.Point,e=new egret.Point;this.og.localToGlobal(0,0,e),i.x=e.x,i.y=e.y,this._skillShotByPosition(i),i.x=e.x+this.og.width/2,i.y=e.y,this._skillShotByPosition(i),i.x=e.x+this.og.width/2,i.y=e.y-this.og.height/2,this._skillShotByPosition(i),i.x=e.x+this.og.width/2,i.y=e.y+this.og.height/2,this._skillShotByPosition(i)},i.prototype._skillShotByPosition=function(t){var i=0;i=this.og.getIsFriendly()?0:Math.PI/2;var e=new TriBullet(IdUitl.getId(),this.og,i,this.og.getIsFriendly(),t.x,t.y);null!=this.gc&&(this.gc.addEntityToGame(e),e.setHostile(this.gc.getTrackObj(e)))},i}(Skill);__reflect(SkillTri.prototype,"SkillTri");var Square=function(t){function i(i,e,s,o,n,h,r,a,l){var c=t.call(this,Gaometry.TYPE_SQUARE,i,e,s,o,n,h,r,a,l)||this;return c.life=1,c.attack=1,c.maxLifeTime=15e3,c.attackSpeed=.2,c.attackTime=0,c}return __extends(i,t),i.prototype.draw=function(){this.width=40,this.height=30,this.graphics.lineStyle(2,this.color),this.graphics.moveTo(this.width/2,0),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,0),this.graphics.lineTo(0,this.height/2),this.graphics.lineTo(this.width/2,0),this.graphics.endFill()},i.prototype.shot=function(){var t=new egret.Point;this.localToGlobal(0,0,t);var i=new SquBullet("dddd",this,this.getPosition(),this.isFriendly,t.x,t.y);null!=this.gc&&this.gc.addEntityToGame(i)},i.prototype.dieAnimationPaintin=function(t){if(null==this.lineAnimations){this.graphics.clear(),this.lineAnimations=new Array;for(var i=0;8>i;i++){var e=new egret.Shape;this.lineAnimations.push(e),this.addChild(e)}}for(var i=0;8>i;i++)this.lineAnimations[i].graphics.clear();this.lineAnimations[0].graphics.lineStyle(2,this.color),this.lineAnimations[0].graphics.moveTo(this.width/4-this.width/4*t,this.height/4-this.height/4*t),this.lineAnimations[0].graphics.lineTo(this.width/2-this.width/4*t,0),this.lineAnimations[0].graphics.endFill(),this.lineAnimations[1].graphics.lineStyle(2,this.color),this.lineAnimations[1].graphics.moveTo(this.width/4-this.width/4*t,this.height/4-this.height/4*t),this.lineAnimations[1].graphics.lineTo(0,this.height/2-this.height/4*t),this.lineAnimations[1].graphics.endFill(),this.lineAnimations[2].graphics.lineStyle(2,this.color),this.lineAnimations[2].graphics.moveTo(-(this.width/4-this.width/4*t),this.height/4-this.height/4*t),this.lineAnimations[2].graphics.lineTo(0,this.height/2-this.height/4*t),this.lineAnimations[2].graphics.endFill(),this.lineAnimations[3].graphics.lineStyle(2,this.color),this.lineAnimations[3].graphics.moveTo(-(this.width/4-this.width/4*t),this.height/4-this.height/4*t),this.lineAnimations[3].graphics.lineTo(-(this.width/2-this.width/4*t),0),this.lineAnimations[3].graphics.endFill(),this.lineAnimations[4].graphics.lineStyle(2,this.color),this.lineAnimations[4].graphics.moveTo(-(this.width/4-this.width/4*t),-this.height/4+this.height/4*t),this.lineAnimations[4].graphics.lineTo(-(this.width/2-this.width/4*t),0),this.lineAnimations[4].graphics.endFill(),this.lineAnimations[5].graphics.lineStyle(2,this.color),this.lineAnimations[5].graphics.moveTo(-(this.width/4-this.width/4*t),-this.height/4+this.height/4*t),this.lineAnimations[5].graphics.lineTo(0,-(this.height/2-this.height/4*t)),this.lineAnimations[5].graphics.endFill(),this.lineAnimations[6].graphics.lineStyle(2,this.color),this.lineAnimations[6].graphics.moveTo(this.width/4-this.width/4*t,-this.height/4+this.height/4*t),this.lineAnimations[6].graphics.lineTo(0,-(this.height/2-this.height/4*t)),this.lineAnimations[6].graphics.endFill(),this.lineAnimations[7].graphics.lineStyle(2,this.color),this.lineAnimations[7].graphics.moveTo(this.width/4-this.width/4*t,-this.height/4+this.height/4*t),this.lineAnimations[7].graphics.lineTo(this.width/2-this.width/4*t,0),this.lineAnimations[7].graphics.endFill()},i}(Gaometry);__reflect(Square.prototype,"Square");var SquBullet=function(t){function i(i,e,s,o,n,h){var r=t.call(this,Bullet.TYPE_SQUARE,i,e,s,o,n,h)||this;return r.initData(),r}return __extends(i,t),i.prototype.initData=function(){this.setspeed(200),this.life=1,this.attack=2,this.maxLifeTime=1e4},i.prototype.draw=function(){this.width=8,this.height=10,this.graphics.lineStyle(2,this.color),this.graphics.moveTo(this.width/2,0),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,0),this.graphics.lineTo(0,this.height/2),this.graphics.lineTo(this.width/2,0),this.graphics.endFill()},i.prototype.initChild=function(){},i}(Bullet);__reflect(SquBullet.prototype,"SquBullet");var Triangle=function(t){function i(i,e,s,o,n,h,r,a,l){var c=t.call(this,Gaometry.TYPE_TRIANGLE,i,e,s,o,n,h,r,a,l)||this;return c.life=1,c.attack=1,c.maxLifeTime=15e3,c.attackSpeed=.2,c.attackTime=0,c}return __extends(i,t),i.prototype.draw=function(){this.width=40,this.height=40,this.graphics.lineStyle(3,this.color),this.graphics.moveTo(this.width/2,this.height/2),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,this.height/2),this.graphics.lineTo(this.width/2,this.height/2),this.graphics.endFill()},i.prototype.shot=function(){var t=new egret.Point;this.localToGlobal(0,0,t);var i=new TriBullet("dddd",this,this.getPosition(),this.isFriendly,t.x,t.y);if(null!=this.gc){var e=this.gc.getTrackObj(i);i.setHostile(e),this.gc.addEntityToGame(i)}},i.prototype.dieAnimationPaintin=function(t){if(null==this.lineAnimations){this.graphics.clear(),this.lineAnimations=new Array;for(var i=0;3>i;i++){var e=new egret.Shape;0==i?(e.graphics.lineStyle(2,this.color),e.graphics.moveTo(this.width/2,this.height/2),e.graphics.lineTo(-this.width/2,this.height/2),e.graphics.endFill(),e.x=this.width/2,e.y=this.height/2,e.anchorOffsetX=e.x,e.anchorOffsetY=e.y):1==i?(e.graphics.lineStyle(2,this.color),e.graphics.moveTo(-this.width/2,this.height/2),e.graphics.lineTo(0,-this.height/2),e.graphics.endFill(),e.x=-this.width/2,e.y=this.height/2,e.anchorOffsetX=e.x,e.anchorOffsetY=e.y):2==i&&(e.graphics.lineStyle(2,this.color),e.graphics.moveTo(0,-this.height/2),e.graphics.lineTo(this.width/2,this.height/2),e.graphics.endFill(),e.x=0,e.y=-this.height/2,e.anchorOffsetX=e.x,e.anchorOffsetY=e.y),this.lineAnimations.push(e),this.addChild(e)}}for(var i=0;i<this.lineAnimations.length;i++){this.lineAnimations[i].rotation=25*t;var s=Math.acos(this.lineAnimations[i].x/Math.sqrt(Math.pow(this.lineAnimations[i].x,2)+Math.pow(this.lineAnimations[i].y,2)));this.lineAnimations[i].y<0&&(s=2*Math.PI-s),this.lineAnimations[i].x=Math.cos(s+Math.PI*t)*(this.width/2),this.lineAnimations[i].y=Math.sin(s+Math.PI*t)*(this.width/2),this.lineAnimations[i].alpha=1-t}},i}(Gaometry);__reflect(Triangle.prototype,"Triangle");var TriBullet=function(t){function i(i,e,s,o,n,h){var r=t.call(this,Bullet.TYPE_TRIANGLE,i,e,s,o,n,h)||this;return r.initData(),r}return __extends(i,t),i.prototype.initData=function(){this.setspeed(50),this.life=1,this.attack=1,this.maxLifeTime=15e3},i.prototype.draw=function(){this.width=10,this.height=10,this.graphics.lineStyle(2,this.color),this.graphics.moveTo(this.width/2,this.height/2),this.graphics.lineTo(0,-this.height/2),this.graphics.lineTo(-this.width/2,this.height/2),this.graphics.lineTo(this.width/2,this.height/2),this.graphics.endFill()},i.prototype.initChild=function(){},i.prototype.moveRun=function(t){if(null!=this.hostile&&!this.hostile.getIsDie()){var i=this.hostile.x-this.x,e=this.hostile.y-this.y,s=0;s=0==e&&0==i?0:e>=0?Math.acos(i/Math.sqrt(Math.pow(i,2)+Math.pow(e,2))):-Math.acos(i/Math.sqrt(Math.pow(i,2)+Math.pow(e,2))),this.isFriendly?(Math.abs(s)<=Math.PI/2||s>=3*Math.PI/2)&&this.setPosition(s):Math.abs(s)>=Math.PI/2&&s<=3*Math.PI/2&&this.setPosition(s)}this.move(t)},i.prototype.setHostile=function(t){this.hostile=t},i}(Bullet);__reflect(TriBullet.prototype,"TriBullet");var ChangeGaoEvent=function(t){function i(e){var s=t.call(this,i.EVENT_ROULETTECHANGE)||this;return s.i=0,s.i=e,s}return __extends(i,t),i.EVENT_ROULETTECHANGE="event_changegaoevent",i}(egret.Event);__reflect(ChangeGaoEvent.prototype,"ChangeGaoEvent");var RouletteChange=function(t){function i(i,e){var s=t.call(this,i)||this;return s.m_position=e,s}return __extends(i,t),i.EVENT_ROULETTECHANGE="event_roulettechange",i}(egret.Event);__reflect(RouletteChange.prototype,"RouletteChange");var a;!function(t){var i=function(){function t(){}return t}();__reflect(i.prototype,"aaa")}(a||(a={}));var ChangeGaoView=function(t){function i(){var i=t.call(this)||this;return i.bts=new Array,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){this.x=this.parent.width-100,this.y=this.parent.height-100,this.draw(),this.initChild()},i.prototype.draw=function(){},i.prototype.initChild=function(){for(var t=0;3>t;t++){var i=this.getBulletP(t);this.bts[t]=new Button(i),this.addChild(this.bts[t]),this.bts[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)}this.skillActivation=new Button(new egret.Point(0,0)),this.skillActivation.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.addChild(this.skillActivation)},i.prototype.getBulletP=function(t){var i=new egret.Point;return i.x=100*-Math.cos(t*Math.PI/4),i.y=100*-Math.sin(t*Math.PI/4),i},i.prototype.onTouchTap=function(t){egret.log("touchtap this x :"+t.localX),egret.log("touchtap this stage x :"+t.stageX),t.target==this.bts[0]?this.postEvent(0):t.target==this.bts[1]?this.postEvent(1):t.target==this.bts[2]?this.postEvent(2):t.target==this.skillActivation&&this.postSkillEvent()},i.prototype.postEvent=function(t){var i=new ChangeGaoEvent(t);this.dispatchEvent(i),egret.log("post changeGao event ")},i.prototype.postSkillEvent=function(){var t=new egret.Event("postSkillEvent");this.dispatchEvent(t),egret.log("post skillactivation event ")},i}(egret.Sprite);__reflect(ChangeGaoView.prototype,"ChangeGaoView");var Button=function(t){function i(i){var e=t.call(this)||this;return e.x=i.x,e.y=i.y,e.touchEnabled=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(i,t),i.prototype.onAddToStage=function(t){this.draw()},i.prototype.draw=function(){this.graphics.beginFill(3429632,0),this.graphics.drawCircle(0,0,35),this.graphics.endFill(),this.graphics.lineStyle(2,3429632),this.graphics.drawCircle(0,0,35),this.graphics.endFill()},i}(egret.Shape);__reflect(Button.prototype,"Button");var GameScene=function(t){function i(){var i=t.call(this)||this;return i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){this.initView()},i.prototype.initView=function(){var t=new GameUIView(this.stage.width,this.stage.height);this.gameView=new GameView,this.addChild(this.gameView),this.addChild(t),t.addEventListener(RouletteChange.EVENT_ROULETTECHANGE,this.onRouChange,this),t.addEventListener(ChangeGaoEvent.EVENT_ROULETTECHANGE,this.onChangeGao,this),t.addEventListener("postSkillEvent",this.onSkillActivation,this)},i.prototype.onSkillActivation=function(t){this.gameView.skillActivation()},i.prototype.onChangeGao=function(t){egret.log(" changegoa  GameScene :"+t.i),this.gameView.onChangeGao(t.i)},i.prototype.onRouChange=function(t){if(egret.log(" roulettechange  gs"),egret.log(" roulettechange position point.x="+t.m_position.x+"point.y="+t.m_position.y),0==t.m_position.y&&0==t.m_position.x)this.gameView.rouUp();else if(t.m_position.y>=0){var i=Math.acos(t.m_position.x/Math.sqrt(Math.pow(t.m_position.x,2)+Math.pow(t.m_position.y,2)));this.gameView.rouMove(i)}else{var i=-Math.acos(t.m_position.x/Math.sqrt(Math.pow(t.m_position.x,2)+Math.pow(t.m_position.y,2)));this.gameView.rouMove(i)}},i.prototype.onPause=function(){this.gameView.onPause()},i.prototype.onResume=function(){this.gameView.onResume()},i}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var GameUIView=function(t){function i(i,e){var s=t.call(this)||this;return s.width=i,s.height=e,s.addEventListener(egret.Event.ADDED_TO_STAGE,s.onAddToStage,s),s}return __extends(i,t),i.prototype.onAddToStage=function(t){this.initView()},i.prototype.initView=function(){var t=new Roulette;this.addChild(t),t.addEventListener(RouletteChange.EVENT_ROULETTECHANGE,this.onRouChange,this),this.changeGaoView=new ChangeGaoView,this.changeGaoView.addEventListener(ChangeGaoEvent.EVENT_ROULETTECHANGE,this.onChangeGao,this),this.changeGaoView.addEventListener("postSkillEvent",this.onSkillActivation,this),this.addChild(this.changeGaoView)},i.prototype.onSkillActivation=function(t){this.dispatchEvent(t)},i.prototype.onChangeGao=function(t){egret.log(" changegoa  vi"),this.dispatchEvent(t)},i.prototype.onRouChange=function(t){this.dispatchEvent(t),egret.log(" roulettechange  vi")},i}(egret.DisplayObjectContainer);__reflect(GameUIView.prototype,"GameUIView");var GameView=function(t){function i(){var i=t.call(this)||this;return i.lastGameTime=0,i.gc=new GameControl(i),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){this.gc.initGame(),this.lastGameTime=egret.getTimer(),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},i.prototype.initView=function(){},i.prototype.onEnterFrame=function(){var t=egret.getTimer(),i=t-this.lastGameTime;this.lastGameTime=t,this.gameViewMove(i),this.gc.gameRun(i)},i.prototype.rouMove=function(t){this.gc.rouMove(t)},i.prototype.rouUp=function(){this.gc.rouUp()},i.prototype.onPause=function(){},i.prototype.onResume=function(){this.lastGameTime=egret.getTimer()},i.prototype.gameViewMove=function(t){this.x=this.x-i.speed*t/1e3},i.prototype.onChangeGao=function(t){this.gc.changeOriginGao(t),egret.log("gameview changegao :"+t)},i.prototype.skillActivation=function(){this.gc.skillActivation()},i.speed=30,i}(egret.DisplayObjectContainer);__reflect(GameView.prototype,"GameView");var Roulette=function(t){function i(){var i=t.call(this)||this;return i.touchPoints={names:[]},i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i.x=150,i.y=500,i.width=200,i.height=200,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouchDownThis,i),i}return __extends(i,t),i.prototype.onAddToStage=function(t){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchDown,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchUp,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.draw()},i.prototype.draw=function(){this.m_outlineou=new egret.Sprite,this.m_outlineou.x=0,this.m_outlineou.y=0,this.m_outlineou.graphics.lineStyle(3,65280),this.m_outlineou.graphics.drawCircle(0,0,100),this.m_outlineou.graphics.endFill(),this.addChild(this.m_outlineou),this.m_insiteRou=new egret.Sprite,this.m_insiteRou.x=0,this.m_insiteRou.y=0,this.m_insiteRou.graphics.beginFill(255,1),this.m_insiteRou.graphics.drawCircle(0,0,30),this.m_insiteRou.graphics.endFill(),this.addChild(this.m_insiteRou)},i.prototype.onTouchDownThis=function(t){},i.prototype.onTouchMove=function(t){t.touchPointID==this.insideRouTouchId&&(egret.log("touch move touchID :"+t.touchPointID),this.touchPoints[t.touchPointID].x=t.stageX,this.touchPoints[t.touchPointID].y=t.stageY,this.m_outlineou.hitTestPoint(this.touchPoints[t.touchPointID].x,this.touchPoints[t.touchPointID].y,!1)&&(this.m_insiteRou.x=this.touchPoints[t.touchPointID].x-this.x,this.m_insiteRou.y=this.touchPoints[t.touchPointID].y-this.y,this.postEvent(new egret.Point(this.m_insiteRou.x,this.m_insiteRou.y))))},i.prototype.onTouchUp=function(t){t.touchPointID==this.insideRouTouchId&&(this.m_insiteRou.x=0,this.m_insiteRou.y=0,this.postEvent(new egret.Point(this.m_insiteRou.x,this.m_insiteRou.y)),this.insideRouTouchId=-1),delete this.touchPoints[t.touchPointID]},i.prototype.onTouchDown=function(t){null==this.touchPoints[t.touchPointID]&&(this.touchPoints[t.touchPointID]=new egret.Point(t.stageX,t.stageY),this.touchPoints.names.push(t.touchPointID)),this.hitTestPoint(this.touchPoints[t.touchPointID].x,this.touchPoints[t.touchPointID].y,!1)&&(this.insideRouTouchId=t.touchPointID,this.m_insiteRou.x=this.touchPoints[t.touchPointID].x-this.x,this.m_insiteRou.y=this.touchPoints[t.touchPointID].y-this.y,this.postEvent(new egret.Point(this.m_insiteRou.x,this.m_insiteRou.y)))},i.prototype.postEvent=function(t){var i=new RouletteChange(RouletteChange.EVENT_ROULETTECHANGE,t);this.dispatchEvent(i)},i}(egret.Sprite);__reflect(Roulette.prototype,"Roulette");